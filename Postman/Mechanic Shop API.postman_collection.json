{
	"info": {
		"_postman_id": "fc99586e-72bd-47d9-afd5-a11ebf33ce99",
		"name": "Mechanic Shop API",
		"description": "Complete API for Mechanic Shop Management System with authentication, rate limiting, and caching",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "49025644",
		"_collection_link": "https://justin-wold88-9318851.postman.co/workspace/justin's-Workspace~05566301-623e-467b-88de-620b8af7f038/collection/49025644-fc99586e-72bd-47d9-afd5-a11ebf33ce99?action=share&source=collection_link&creator=49025644"
	},
	"item": [
		{
			"name": "üë• Customer Management",
			"item": [
				{
					"name": "Register Customer",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\",\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/customers",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers"
							]
						}
					},
					"response": []
				},
				{
					"name": "Customer Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.collectionVariables.set(\"customerToken\", jsonData.token);",
									"pm.collectionVariables.set(\"customerId\", jsonData.customer_id);",
									"console.log(\"Customer Token:\", jsonData.token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/customers/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get All Customers (Paginated & Cached)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/customers?page=1&per_page=5",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "5"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Customer by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/customers/{{customerId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers",
								"{{customerId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Customer (Token Required)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"first_name\": \"John Updated\",\n  \"last_name\": \"Doe Updated\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/customers/{{customerId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers",
								"{{customerId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Customer (Token Required)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/customers/{{customerId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers",
								"{{customerId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get My Tickets (Token Required)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/customers/my-tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers",
								"my-tickets"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üîß Mechanic Management",
			"item": [
				{
					"name": "Register Mechanic",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"first_name\": \"Jane\",\n  \"last_name\": \"Smith\",\n  \"email\": \"jane.smith@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/mechanics",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"mechanics"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mechanic Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.collectionVariables.set(\"mechanicToken\", jsonData.token);",
									"pm.collectionVariables.set(\"mechanicId\", jsonData.mechanic_id);",
									"console.log(\"Mechanic Token:\", jsonData.token);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"jane@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/mechanics/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"mechanics",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get All Mechanics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/mechanics",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"mechanics"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Mechanic by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/mechanics/{{mechanicId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"mechanics",
								"{{mechanicId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Mechanic (Token Required)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{mechanicToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"first_name\": \"Jane Updated\",\n  \"last_name\": \"Smith Updated\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/mechanics/{{mechanicId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"mechanics",
								"{{mechanicId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Mechanic (Token Required)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{mechanicToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/mechanics/{{mechanicId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"mechanics",
								"{{mechanicId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Mechanics Leaderboard",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/mechanics/leaderboard",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"mechanics",
								"leaderboard"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üé´ Service Tickets",
			"item": [
				{
					"name": "Create Service Ticket (Customer Token Required)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.collectionVariables.set(\"ticketId\", jsonData.id);",
									"console.log(\"Created Ticket ID:\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"issue\": \"Engine making strange noises\",\n  \"vehicle_info\": \"Toyota Camry 2020\",\n  \"status\": \"open\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/service_tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"service_tickets"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get All Service Tickets (Rate Limited)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/service_tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"service_tickets"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Service Ticket by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/service_tickets/{{ticketId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"service_tickets",
								"{{ticketId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Service Ticket (Mechanic Token Required)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{mechanicToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"in_progress\",\n  \"issue\": \"Engine making strange noises - diagnosed as belt issue\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/service_tickets/{{ticketId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"service_tickets",
								"{{ticketId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add/Remove Mechanics from Ticket",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{mechanicToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"add_ids\": [{{mechanicId}}],\n  \"remove_ids\": []\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/service_tickets/{{ticketId}}/edit",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"service_tickets",
								"{{ticketId}}",
								"edit"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Part to Ticket",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{mechanicToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"part_id\": {{inventoryId}},\n  \"quantity\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/service_tickets/{{ticketId}}/parts",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"service_tickets",
								"{{ticketId}}",
								"parts"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Service Ticket (Mechanic Token Required)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{mechanicToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/service_tickets/{{ticketId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"service_tickets",
								"{{ticketId}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üì¶ Inventory Management",
			"item": [
				{
					"name": "Create Inventory Item (Mechanic Token Required)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"pm.collectionVariables.set(\"inventoryId\", jsonData.id);",
									"console.log(\"Created Inventory ID:\", jsonData.id);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{mechanicToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Spark Plug\",\n  \"price\": 8.99\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/inventory",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"inventory"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get All Inventory Items",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/inventory",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"inventory"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Inventory Item by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/inventory/{{inventoryId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"inventory",
								"{{inventoryId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Inventory Item (Mechanic Token Required)",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{mechanicToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Spark Plug - Premium\",\n  \"price\": 12.99\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/inventory/{{inventoryId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"inventory",
								"{{inventoryId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Inventory Item (Mechanic Token Required)",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{mechanicToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/inventory/{{inventoryId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"inventory",
								"{{inventoryId}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "‚ö° Rate Limit Testing",
			"item": [
				{
					"name": "Test Customer Rate Limit (10/min)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/customers",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers"
							]
						}
					},
					"response": []
				},
				{
					"name": "Test Service Tickets Rate Limit (20/min)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/service_tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"service_tickets"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üîê Authentication Tests",
			"item": [
				{
					"name": "Test Protected Route Without Token",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/customers/my-tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers",
								"my-tickets"
							]
						}
					},
					"response": []
				},
				{
					"name": "Test Protected Route With Invalid Token",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer invalid_token_here"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/customers/my-tickets",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"customers",
								"my-tickets"
							]
						}
					},
					"response": []
				},
				{
					"name": "Test Customer Token on Mechanic Route",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Test Part\",\n  \"price\": 9.99\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/inventory",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"inventory"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üè† Health Check",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Ensure baseUrl is set in environment; default to local server if missing",
							"(function(){",
							"  const env = pm.environment;",
							"  const current = env.get('baseUrl');",
							"  if (!current) {",
							"    env.set('baseUrl', 'http://127.0.0.1:5000');",
							"  }",
							"",
							"  // Update the request URL to a likely existing endpoint",
							"  try {",
							"    // Force the request URL to /mechanic if it was root",
							"    const original = pm.request.url.toString();",
							"    if (original.match(/\\{\\{\\s*baseUrl\\s*\\}\\}\\/\\s*$/)) {",
							"      // mutate the URL path safely",
							"      pm.request.url = pm.request.url.replace(/\\/?$/, '') + '/mechanic';",
							"    }",
							"  } catch (e) {",
							"    // no-op",
							"  }",
							"})();"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Allow 200 OK or 404 Not Found with helpful diagnostics",
							"pm.test('Status is 200 or 404', function () {",
							"  pm.expect(pm.response.code, 'expected 200 (preferred) or 404').to.be.oneOf([200, 404]);",
							"});",
							"",
							"// Parse JSON if possible and assert shape depending on status",
							"(function(){",
							"  let isJson = false; let data;",
							"  try { data = pm.response.json(); isJson = true; } catch (e) {}",
							"",
							"  pm.test('Response is JSON', function(){",
							"    pm.expect(isJson, 'response should be JSON').to.be.true;",
							"  });",
							"",
							"  if (!isJson) { return; }",
							"",
							"  pm.test('Body is an object', function(){",
							"    pm.expect(data).to.be.an('object');",
							"  });",
							"",
							"  if (pm.response.code === 200) {",
							"    pm.test('200 response should not contain error key', function(){",
							"      pm.expect(Object.prototype.hasOwnProperty.call(data, 'error')).to.be.false;",
							"    });",
							"  }",
							"",
							"  if (pm.response.code === 404) {",
							"    pm.test('404 response may contain error key with message', function(){",
							"      pm.expect(Object.prototype.hasOwnProperty.call(data, 'error'), 'should include error field for 404').to.be.true;",
							"      pm.expect(data.error).to.be.a('string');",
							"    });",
							"  }",
							"})();",
							"",
							"// Add diagnostics when unexpected",
							"pm.test('Diagnostics (status/body)', function(){",
							"  if (![200,404].includes(pm.response.code)){",
							"    console.error('Unexpected status', pm.response.code, pm.response.text());",
							"  }",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"disabled": true
					},
					{
						"key": "Accept",
						"value": "application/json",
						"disabled": true
					}
				],
				"url": {
					"raw": "{{baseUrl}}/",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						""
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"console.log('Running request to:', pm.request.url);"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"pm.test(\"Status code is 200\", function () {",
					"    pm.response.to.have.status(200);",
					"});",
					"",
					"// For successful POST requests",
					"if (pm.response.code === 201) {",
					"    pm.test(\"Status code is 201\", function () {",
					"        pm.response.to.have.status(201);",
					"    });",
					"}",
					"",
					"// For rate limit testing",
					"if (pm.response.code === 429) {",
					"    pm.test(\"Rate limit exceeded\", function () {",
					"        pm.response.to.have.status(429);",
					"    });",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5000",
			"type": "string"
		},
		{
			"key": "customerToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "mechanicToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "customerId",
			"value": "",
			"type": "string"
		},
		{
			"key": "mechanicId",
			"value": "",
			"type": "string"
		},
		{
			"key": "ticketId",
			"value": "",
			"type": "string"
		},
		{
			"key": "inventoryId",
			"value": "",
			"type": "string"
		}
	]
}